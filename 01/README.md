# 01 Тестовое задание

Разработать и написать систему для хранения файлов

1. Есть два вида сервисов Сервер и Менеджер
2. Сервер может обрабатывать запросы Создания, просмотра и получения файлов
3. Сервер может быть только 1, менеджеров может быть больше 1
4. При запросе на создание файла клиентом отправляется сам файл POST запросом с типом
multipart/form-data. Сервер должен отправить этот файл одному из менеджеров и получить его id.
5. При запросе на просмотр файла клиент должен получить метаданные файла по его id. Если это
получение файла нужно вернуть сам файл.
6. Каждый менеджер имеет вместимость -- количество файлов которое может хранить менеджер.

Сервер должен по возможности равномерно распределять файлы между менеджерами.

Подробности реализации и хранения на откуп исполнителю.

Важные вопросы в системе: валидация входных данных, обработка ошибок, таймаут,
безопасность подключения и выполнения запросов(например учесть возможность отправки
запроса на менеджер в обход сервера, такого нельзя допустить), невозможность сохранить файл.
Необязательно реализовывать все, достаточно примерно описать как предполагается
реализовывать.

Доп высказать мнение по дальнейшему улучшения и какие-то предложения по сервису.

----

## Решение

### Менеджер

Для связи между менеджером и сервером используется grpc.
Информация о принятом файле сохраняется в специальный файл «meta.json»

При старте менеджер принимает 4 параметра:

meta - файл для хранения информации о принятых файлах

limit - вместительность хранилища

port - порт grpc

auth - ключ для проверки разрешения на операции с файлами

## Сервер

При старте сервер принимает 3 параметра:

httpport — порт для http сервера

grpcaddress — массив пар «ip:port ip:port» адреса и пороты менеджеров

auth — ключ для проверки разрешения на операции с файлами.

----

Ендпоинты для работы с файлами:

Для загрузки файла 127.0.0.1:1234/file/upload.html

Для удаления файла 127.0.0.1:1234/file/delete.html

Для скачивания файла 127.0.0.1:1234/file/download/:id

Для получения списка id файлов 127.0.0.1:1234/file/ids

Для получения информации о файле 127.0.0.1:1234/file/info/:id

----

make build собрать проект

make manager1 запустить первый менеджер

make manager2 запустить второй менеджер

make manager3 запустить третий менеджер

make server запустить сервер
